# GitHub Actions para deploy autom√°tico no Coolify
# Opcional: para integra√ß√£o com GitHub

name: Deploy to Coolify

on:
  push:
    branches:
      - main      # Produ√ß√£o
      - develop   # Desenvolvimento
  pull_request:
    branches:
      - main

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          
      - name: Test Build
        run: |
          chmod +x deploy.sh
          ./deploy.sh test

  deploy-dev:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/develop'
    steps:
      - name: Deploy to Development
        run: |
          echo "üîß Deploying to development environment"
          # Coolify webhook para desenvolvimento
          # curl -X POST ${{ secrets.COOLIFY_DEV_WEBHOOK }}

  deploy-prod:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Deploy to Production
        run: |
          echo "üè≠ Deploying to production environment"
          # Coolify webhook para produ√ß√£o
          # curl -X POST ${{ secrets.COOLIFY_PROD_WEBHOOK }}